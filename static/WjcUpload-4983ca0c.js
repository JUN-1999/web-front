import{a as $}from"./file-8d574e40.js";import{d as C,e as r,o as i,c as f,a as l,w as _,v as k,f as h,C as S,$ as j,h as M,_ as W,F as B,r as F,i as I,G as w,l as x,p as H,q as U}from"./index-523b3adb.js";import{a as N,V as E}from"./ViewVideo-93637825.js";const G=["src"],z={class:"tip"},J={class:"header"},L={class:"content"},O=["src"],q=C({__name:"ViewImg",props:{src:{type:String,default:""},showDelete:{type:Boolean,default:()=>!1},loading:{type:Boolean,default:!1}},emits:["imgDelete"],setup(e,{emit:y}){const m=e;let p=r(!1),n=r(!1);const u=c=>{N({images:[m.src]})},o=()=>{n.value=!0},a=()=>{n.value=!1},v=c=>{y("imgDelete",c)};return(c,t)=>(i(),f("div",{onMouseenter:o,onMouseleave:a,class:"view-img"},[l("img",{id:"img",src:e.src},null,8,G),_(l("div",z,[l("i",{onClick:t[0]||(t[0]=d=>u()),class:"iconfont icon-fangda"}),e.showDelete?(i(),f("i",{key:0,onClick:t[1]||(t[1]=d=>v(e.src)),class:"iconfont icon-shanchu"})):S("",!0)],512),[[k,h(n)]]),_(l("div",{class:M([{"max-img-show":h(p)},"max-img"])},[l("div",J,[l("i",{onClick:t[2]||(t[2]=j(d=>u(),["stop"])),class:"iconfont icon-guanbi"})]),l("div",L,[l("img",{src:e.src,alt:""},null,8,O)])],2),[[k,h(p)]])],32))}}),A=W(q,[["__scopeId","data-v-a62a76f1"]]),K=e=>(H("data-v-dfafb95c"),e=e(),U(),e),P=K(()=>l("i",{class:"iconfont icon-tianjia"},null,-1)),Q=[P],R=["accept"],T=C({__name:"WjcUpload",props:{pics:null,accept:{default:"image/*"},labelStyleWidth:null,labelStyleHeight:null},emits:["uploadSuccess","mediaDelete"],setup(e,{expose:y,emit:m}){const p=e,n="uploadIMG_"+Math.random()*1e3,u=r();let o=r(!1);const a=r(null),v=async()=>{var t,d,s;if(o.value=!0,(t=a.value)!=null&&t.files&&((d=a.value)==null?void 0:d.files.length)>0){w({message:"图片开始上传",type:"success"});const V=((s=a.value)==null?void 0:s.files)&&a.value.files[0],b=new FormData;b.append("file",V);let g=await $(b);if(o.value=!1,g.errno===0){w({message:"图片上传成功",type:"success"});let D=JSON.parse(JSON.stringify(p.pics));D.push({name:g.data.name,url:g.data.url,type:g.data.type}),m("uploadSuccess",D),a.value.value=""}}else o.value=!1,w({message:"取消上传"})},c=t=>{m("mediaDelete",t)};return y({wjcUpload:u,inputFile:a}),(t,d)=>(i(),f("div",{class:"wjc-upload",ref_key:"wjcUpload",ref:u},[(i(!0),f(B,null,F(e.pics,s=>(i(),f("div",{class:"input-label",key:s.name,style:I({width:e.labelStyleWidth?e.labelStyleWidth:"140px",height:e.labelStyleHeight?e.labelStyleHeight:"140px"})},[s.type=="img"?(i(),x(A,{key:0,loading:h(o),src:s.url,showDelete:!0,onImgDelete:c},null,8,["loading","src"])):S("",!0),s.type=="video"?(i(),x(E,{key:1,src:s.url,showDelete:!0,onVideoDelete:c},null,8,["src"])):S("",!0)],4))),128)),l("label",{style:I({width:e.labelStyleWidth?e.labelStyleWidth:"140px",height:e.labelStyleHeight?e.labelStyleHeight:"140px"}),for:n,class:"input-label"},Q,4),l("input",{accept:e.accept,ref_key:"inputFile",ref:a,onChange:v,type:"file",name:"",id:n,style:{display:"none"}},null,40,R)],512))}});const ee=W(T,[["__scopeId","data-v-dfafb95c"]]);export{ee as W};
